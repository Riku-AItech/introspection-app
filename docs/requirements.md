# 内省の時間 - 要件定義書

## 1. アプリ概要

本アプリは、ユーザーがAIエージェントとの対話を通じて自身を見つめ直す時間「内省の時間」を確保するための簡易ツールです。ユーザーの心理状態や個性に合わせて、詩の生成や自己分析のきっかけとなる問いかけをLLM(大規模言語モデル)が行います。

### 特長
- 「自己内省」を促進するテキストベースの対話
- ユーザーの状況に合わせた詩の生成
- データベースを用いず、サーバー上に会話履歴を永続化しない簡素な仕組み

## 2. ターゲットユーザーと利用シナリオ

### ターゲットユーザー
- 日々の忙しさの中で「自分と向き合うための時間」を確保したい個人ユーザー
- 心理的負荷を感じているが、深く内省する機会が少ないユーザー
- 手軽にAIエージェントと対話し、自分の考えや気持ちを整理したい人
- 感性に訴える詩を通して気分転換・気づきを得たい人

### 利用シナリオ
- 通勤時、休憩時、就寝前などの空き時間に利用
- 簡単な質問に回答し、AIエージェントからのフィードバックや詩を楽しむ
- 自分自身の心を見つめ直す

## 3. 機能要件

### 3.1 ログイン機能・ユーザー管理
- データベースを使わない簡易認証
- ゲスト利用可能
- ユーザー区別が必要な場合は一時的なセッショントークンを使用
- アプリ終了後は履歴を破棄

### 3.2 自己内省対話機能
- 「内省タイム」開始時にLLMが質問を提示
- テキストフィールドによる回答
- AIによる深掘り質問
- セッション中のみ会話内容を保持
- アプリ終了時に会話内容を破棄

### 3.3 パーソナライズされた詩の生成
- ユーザーの気分や入力内容に応じた詩生成
- 詩の形式選択（自由詩、短歌、俳句など）
- ブックマーク機能（ローカルストレージ利用）

## 4. 技術要件

### 4.1 フロントエンド
- Next.js (TypeScript)
- Tailwind CSS
- React Hook Form
- Zustand (状態管理)

### 4.2 バックエンド
- Next.js API Routes
- OpenAI API (LLM)
- Vercel Edge Functions

### 4.3 ストレージ
- セッションストレージ（一時的なデータ保持）
- ローカルストレージ（ブックマーク保存）

## 5. 画面設計

### 5.1 メイン画面
- 内省タイム開始ボタン
- 詩の形式選択
- ブックマーク一覧

### 5.2 対話画面
- AIメッセージ表示エリア
- ユーザー入力フォーム
- 詩生成ボタン

## 6. 非機能要件

- レスポンシブデザイン（モバイル対応）
- 高速な初期表示（Vercel Edge Functions活用）
- プライバシー保護（データ永続化なし）
- アクセシビリティ対応

## 7. 開発計画

### 7.1 フェーズ1: 基本機能実装
- 対話機能の実装
- 詩生成機能の実装
- 簡易認証の実装

### 7.2 フェーズ2: 拡張機能実装
- ブックマーク機能
- 詩の形式選択
- ユーザー設定

### 7.3 フェーズ3: 最適化
- パフォーマンス改善
- UI/UX改善
- テストケース作成
